actor NitroTruckSmall
{
+SOLID
+CANPASS
+DONTBLAST
+DONTREFLECT
+RIPPER
+SHOOTABLE
+THRUGHOST
+THRUSPECIES
+NOBLOOD
+ACTIVATEMCROSS
+FORCEYBILLBOARD
var int user_playerRiding[64];
Damage(0)
Height 120
Radius 78
Scale 2.5
gravity 2.0
speed 18
Health 1000
painchance 256
species "MovingPlatform"

damagefactor "Normal", 0.0
damagefactor "ChillSpike", 1.0
damagefactor "Crush", 1.0
damagefactor "IceWall", 1.0

var int user_oldx;
var int user_oldy;

States
{
Spawn:
NTS8 A 1
NTS8 A 0 ACS_NamedExecuteAlways("core_stickyLifts", 0, STICKYMODE_GUTSLIFT)
NTS8 A 3 
NTS8 A 0 A_ClearTarget
Goto Spawn2
Spawn2:
NTS8 A 0 A_ChangeVelocity(18, 0, 0, CVF_RELATIVE|CVF_REPLACE)
NTS8 A 0 A_SetUserVar("user_oldx", x)
NTS8 A 0 A_SetUserVar("user_oldy", y)
NTS8 A 2 A_SpawnItemEx("NitroTruckRoadkiller",4,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
NTS8 A 0 A_JumpIf(abs(x-user_oldx)<1 && abs(y-user_oldy)<1, "Death")
NTS8 A 0 A_SetUserVar("user_oldx", x)
NTS8 A 0 A_SetUserVar("user_oldy", y)
NTS8 A 2 A_SpawnItemEx("NitroTruckRoadkiller",4,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
NTS8 A 0 A_JumpIf(abs(x-user_oldx)<1 && abs(y-user_oldy)<1, "Death")
NTS8 A 0 A_SetUserVar("user_oldx", x)
NTS8 A 0 A_SetUserVar("user_oldy", y)
NTS8 A 0 A_ChangeVelocity(18, 0, 0, CVF_RELATIVE|CVF_REPLACE)
NTS8 B 2 A_SpawnItemEx("NitroTruckRoadkiller",4,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
NTS8 A 0 A_JumpIf(abs(x-user_oldx)<1 && abs(y-user_oldy)<1, "Death")
NTS8 A 0 A_SetUserVar("user_oldx", x)
NTS8 A 0 A_SetUserVar("user_oldy", y)
NTS8 B 2 A_SpawnItemEx("NitroTruckRoadkiller",4,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
NTS8 A 0 A_JumpIf(abs(x-user_oldx)<1 && abs(y-user_oldy)<1, "Death")
loop
Pain:
Death:
NTSB A 0 A_ChangeFlag(NOPAIN, true)
NTS8 A 0 A_ChangeVelocity(-5, 0, 0, CVF_REPLACE | CVF_RELATIVE)
NTS8 AAA 0 A_SpawnItemEx("ExplosionEffect2",random(-90,30),random(-50,30),random(-30,90))
NTS8 A 5 A_PlaySound("misc/mm3explosion")
NTS8 AAA 0 A_SpawnItemEx("ExplosionEffect2",random(-50,30),random(-50,30),random(-30,90))
NTS8 A 5 A_PlaySound("misc/mm3explosion")
NTS8 A 0 A_Stop
NTS8 AAA 0 A_SpawnItemEx("ExplosionEffect2",random(-50,30),random(-50,30),random(-30,90))
NTS8 A 5 A_PlaySound("misc/mm3explosion")
stop
}
}

actor NitroTruckRoadkiller
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+DONTREFLECT
RenderStyle "NONE"
Speed 0
Damage (10)
radius 78
height 115
scale 2.5
+THRUGHOST
+THRUSPECIES
+THRUACTORS
species "MovingPlatform"
damagetype "VehicleHazard"
SelfObituary "$OB_NITROTRUCK"
States
{
Spawn:
PLAY A 0
PLAY A 0 A_RearrangePointers(AAPTR_NULL, AAPTR_TARGET, AAPTR_DEFAULT)
PLAY A 0 A_ChangeFlag(THRUACTORS, false)
PLAY A 1
stop
Death:
TNT1 A 0 A_GiveInventory("NitroTruckDetonator", 1, AAPTR_MASTER)
stop
}
}

actor NitroTruckDetonator : CustomInventory
{
states
{
Pickup:
TNT1 A 0 Thing_Damage(0, 10, 15)
stop
}
}

actor NitroTruckLarge
{
+SOLID
+CANPASS
+MISSILE
+DONTBLAST
+DONTREFLECT
+RIPPER
+FORCEYBILLBOARD
Damage(0)
Height 192
Radius 96
Scale 2.5
gravity 2.0
speed 18
States
{
Spawn:
NTL8 AB 4
loop
}
}

actor OshitsuOsarettsu 11752
{
//$Category MM8BDM-Props
+SOLID
height 64
radius 32
scale 2.5

States
{
Spawn:
OSHI ABCD 4
loop
}
}
